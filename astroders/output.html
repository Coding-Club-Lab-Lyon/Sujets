<html><head>
    <meta charset="utf-8">
    <link rel="stylesheet" href="src/report.css">
    <link rel="stylesheet" href="src/code.css">
    <style>
        @page {
            margin-top: 2.5cm;

            @top-left {
                background: #4c5270;
                color: white;
                content: counter(page);
                height: 1cm;
                text-align: center;
                width: 1cm;
                margin-bottom: 0.6cm;
            }

            @top-center {
                background: #4c5270;
                content: '';
                display: block;
                height: .05cm;
                opacity: .5;
                width: 100%;
                margin-bottom: 0.6cm;
            }

            @top-right {
                content: string(heading);
                font-size: 9pt;
                height: 1cm;
                vertical-align: middle;
                width: 100%;
                margin-bottom: 0.6cm;
            }
        }
    </style>
<style type="text/css">.MathJax_Preview {color: #888}
#MathJax_Message {position: fixed; left: 1px; bottom: 2px; background-color: #E6E6E6; border: 1px solid #959595; margin: 0px; padding: 2px 8px; z-index: 102; color: black; font-size: 80%; width: auto; white-space: nowrap}
#MathJax_MSIE_Frame {position: absolute; top: 0; left: 0; width: 0px; z-index: 101; border: 0px; margin: 0px; padding: 0px}
.MathJax_Error {color: #CC0000; font-style: italic}
</style><style type="text/css">#MathJax_About {position: fixed; left: 50%; width: auto; text-align: center; border: 3px outset; padding: 1em 2em; background-color: #DDDDDD; color: black; cursor: default; font-family: message-box; font-size: 120%; font-style: normal; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; z-index: 201; border-radius: 15px; -webkit-border-radius: 15px; -moz-border-radius: 15px; -khtml-border-radius: 15px; box-shadow: 0px 10px 20px #808080; -webkit-box-shadow: 0px 10px 20px #808080; -moz-box-shadow: 0px 10px 20px #808080; -khtml-box-shadow: 0px 10px 20px #808080; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
.MathJax_Menu {position: absolute; background-color: white; color: black; width: auto; padding: 5px 0px; border: 1px solid #CCCCCC; margin: 0; cursor: default; font: menu; text-align: left; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; z-index: 201; border-radius: 5px; -webkit-border-radius: 5px; -moz-border-radius: 5px; -khtml-border-radius: 5px; box-shadow: 0px 10px 20px #808080; -webkit-box-shadow: 0px 10px 20px #808080; -moz-box-shadow: 0px 10px 20px #808080; -khtml-box-shadow: 0px 10px 20px #808080; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
.MathJax_MenuItem {padding: 1px 2em; background: transparent}
.MathJax_MenuTitle {background-color: #CCCCCC; margin: -5px 0 0 0; text-align: center; font-style: italic; font-size: 80%; color: #444444; padding: 2px 0; overflow: hidden}
.MathJax_MenuArrow {position: absolute; right: .5em; color: #666666}
.MathJax_MenuActive .MathJax_MenuArrow {color: white}
.MathJax_MenuCheck {position: absolute; left: .7em}
.MathJax_MenuRadioCheck {position: absolute; left: .7em}
.MathJax_MenuLabel {padding: 1px 2em 3px 1.33em; font-style: italic}
.MathJax_MenuRule {border-top: 1px solid #DDDDDD; margin: 4px 3px}
.MathJax_MenuDisabled {color: GrayText}
.MathJax_MenuActive {background-color: #606872; color: white}
.MathJax_Menu_Close {position: absolute; width: 31px; height: 31px; top: -15px; left: -15px}
</style><style type="text/css">#MathJax_Zoom {position: absolute; background-color: #F0F0F0; overflow: auto; display: block; z-index: 301; padding: .5em; border: 1px solid black; margin: 0; font-weight: normal; font-style: normal; text-align: left; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; box-shadow: 5px 5px 15px #AAAAAA; -webkit-box-shadow: 5px 5px 15px #AAAAAA; -moz-box-shadow: 5px 5px 15px #AAAAAA; -khtml-box-shadow: 5px 5px 15px #AAAAAA; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
#MathJax_ZoomOverlay {position: absolute; left: 0; top: 0; z-index: 300; display: inline-block; width: 100%; height: 100%; border: 0; padding: 0; margin: 0; background-color: white; opacity: 0; filter: alpha(opacity=0)}
#MathJax_ZoomEventTrap {position: absolute; left: 0; top: 0; z-index: 302; display: inline-block; border: 0; padding: 0; margin: 0; background-color: white; opacity: 0; filter: alpha(opacity=0)}
</style></head>

<body><div id="MathJax_Message" style="display: none;"></div>
    <p>25 Juin 7486.</p>
<p>Le monde a connu de grandes avancées technologiques, mais la planète Terre voit disparaître ses jungles et déserts, ses vents et marées, ses lacs et océans, et sa lumière naturelle provenant du soleil.</p>
<p></p><center><img alt="" src="assets/temple.jpg"> </center><p></p>
<p>Les 12 signes du zodiaque, entités protégeant autrefois la Terre et dont chaque être humain est sous la protection, ont été capturés par les 4 éléments primordiaux venus se venger de l'humanité : l'air, le feu, la terre et l'eau.</p>
<p></p><center><img alt="" src="assets/zodiac.jpg"> </center><p></p>
<p>C'est alors qu'une dernière entité, le Signe du Serpentaire, 13e signe du zodiaque, défie les 4 éléments afin de libérer les 12 autres Signes. Vous êtes choisi pour l'aider à faire face à cette menace. Serez-vous de taille ?</p>
<p><pagebreak></pagebreak></p>
<h2>I : Les préparatifs</h2>
<p>Le Serpentaire vous donne 4 fichiers : Classes.py, Astroders.py, Enemies.py et Player.py.</p>
<p>Il a d’abord besoin que tu l’aides à rejoindre l’espace !</p>
<p>Pour le moment, le contenu du programme permet de créer une fenêtre, de créer le joueur, de pouvoir arrêter le programme avec la touche « Echap », et enfin d’afficher cette fenêtre avec une image en fond.</p>
<p>Pour tester cela, effectue la commande <code>python3 Astroders.py</code> pour démarrer le programme.</p>
<p>On va commencer par aller dans le fichier « Player.py » afin de compléter la classe « Player » :</p>
<div class="codehilite"><pre><span></span><code><span class="o">...</span>
<span class="k">class</span> <span class="nc">Player</span><span class="p">(</span><span class="n">PlayerClass</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">bullets</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">bullet_cooldown</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="c1"># code here</span>
<span class="o">...</span>
</code></pre></div>

<p>Ces lignes de codes permettent de créer une classe « Player » qui hérite de la classe « PlayerClass » déjà présente dans le fichier « Classes.py ». Hérité d'une classe signifie que tous les attributs et les méthodes de la classe parent appartiennent aussi à la classe enfant. Il nous montre aussi comment créer les attributs <strong>bullets</strong> et <strong>bullet_cooldown</strong>. Maintenant à vous de créer les attributs <em>hp</em>, <em>x</em> et <em>y</em> qui auront respectivement pour valeur 3, 0 et 800.</p>
<p><pagebreak></pagebreak></p>
<p>Maintenant que cela est fait, nous allons devoir créer la méthode permettant l'affichage du joueur, de ses points de vie ainsi que ses projectiles (pour lancer un projectile il faut appuyer sur la touche espace). Pour cela il va falloir compléter le code suivant dans le fichier  « Player.py » :</p>
<div class="codehilite"><pre><span></span><code><span class="o">...</span>
<span class="k">def</span> <span class="nf">display</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">game</span><span class="p">):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">costume</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">costume</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">%</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">costumes</span><span class="p">)</span> <span class="o">*</span> <span class="mi">5</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">bullet</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">bullets</span><span class="p">:</span>
        <span class="c1"># add a line here</span>
    <span class="n">hp_text</span> <span class="o">=</span> <span class="n">game</span><span class="o">.</span><span class="n">font</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s2">"HP: </span><span class="si">%d</span><span class="s2">"</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">hp</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="p">(</span><span class="mi">255</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">255</span><span class="p">))</span>
    <span class="c1"># here too</span>
    <span class="n">game</span><span class="o">.</span><span class="n">screen</span><span class="o">.</span><span class="n">blit</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">costumes</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">costume</span> <span class="o">//</span> <span class="mi">5</span><span class="p">],</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">idle_relative</span><span class="p">[</span><span class="mi">1</span><span class="p">]))</span>
<span class="o">...</span>
</code></pre></div>

<p>Les lignes que vous avez à compléter doivent permettre l'affichage de chaque projectile et du texte des HP. Pour cela vous allez devoir utiliser la méthode blite de Pygame qui fonctionne que cela :</p>
<div class="codehilite"><pre><span></span><code><span class="n">screen</span><span class="o">.</span><span class="n">blit</span><span class="p">(</span><span class="n">element_to_display</span><span class="p">,</span> <span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">))</span>
</code></pre></div>

<p>Pour que le code que vous venez de faire soit exécuter il faut rajouter cette ligne dans le fichier « Astroders.py » :</p>
<div class="codehilite"><pre><span></span><code><span class="o">...</span>
<span class="k">def</span> <span class="nf">display_game_elements</span><span class="p">(</span><span class="n">game</span><span class="p">):</span>
    <span class="n">game</span><span class="o">.</span><span class="n">screen</span><span class="o">.</span><span class="n">blit</span><span class="p">(</span><span class="n">game</span><span class="o">.</span><span class="n">background</span><span class="p">,</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
    <span class="n">game</span><span class="o">.</span><span class="n">player</span><span class="o">.</span><span class="n">display</span><span class="p">(</span><span class="n">game</span><span class="p">)</span> <span class="c1"># this one</span>
    <span class="n">pygame</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>
<span class="o">...</span>
</code></pre></div>

<p><pagebreak></pagebreak></p>
<p>Une fois que notre joueur et ces projectiles peuvent s'afficher, il va falloir permettre à notre joueur de se déplacer. Pour cela nous allons devoir créer des méthodes pour chacun des mouvements possibles du joueur à la suite du fichier « Player.py »</p>
<p>Tu peux remarquer qu'il existe déjà une méthode permettant le déplacement vers la gauche :</p>
<div class="codehilite"><pre><span></span><code><span class="o">...</span>
<span class="k">def</span> <span class="nf">move_left</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">-=</span> <span class="bp">self</span><span class="o">.</span><span class="n">player_speed</span>
<span class="o">...</span>
</code></pre></div>

<p>Tu auras remarqué que le mouvement ne s'effectue que lorsque la position du joueur à supérieur à 0 sur l'axe x. Pour les autres mouvements tu vas devoir appliquer la même logique mais avec des valeurs différentes :</p>
<ul>
<li>move_right, ssi la position x du joueur est strictement inférieur à 1150.</li>
<li>move_up, ssi la position y du joueur est strictement supérieur à 600.</li>
<li>move_down, ssi la position y du joueur est strictement inférieur à 800</li>
</ul>
<p>Maintenant que nous avons fait les méthodes associées à chacun des mouvements, nous devons gérer les évènements relatifs à ceux-ci affins que nous puissions déplacer le joueur avec les touches du clavier. Pour cela nous allons modifier la fonction « key_inputs » du fichier « Astroders.py ».</p>
<div class="codehilite"><pre><span></span><code><span class="o">...</span>
<span class="k">def</span> <span class="nf">key_inputs</span><span class="p">(</span><span class="n">player</span><span class="p">):</span>
    <span class="n">keys</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">key</span><span class="o">.</span><span class="n">get_pressed</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">keys</span><span class="p">[</span><span class="n">K_ESCAPE</span><span class="p">]:</span>
        <span class="n">exit</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">keys</span><span class="p">[</span><span class="n">K_SPACE</span><span class="p">]:</span>
        <span class="n">player</span><span class="o">.</span><span class="n">shoot</span><span class="p">()</span>
    <span class="c1"># code here</span>
<span class="o">...</span>
</code></pre></div>

<p>Il ne vous reste plus qu'à implémenter les cas qu'il manque. Tu peux maintenant relancer le programme, et appuyer sur la flèche de droite. Le Serpentaire devrait maintenant bouger !</p>
<p><pagebreak></pagebreak></p>
<h2>II. À l'attaque !</h2>
<p>Bravo ! Le Serpentaire peut maintenant se déplacer librement dans la fenêtre. Mais pour l'instant aucun ennemis en vue...</p>
<p>Pour faire apparaitre  les ennemis il vous suffit de rajouter la ligne suivante dans le fichier « Astroders.py » :</p>
<div class="codehilite"><pre><span></span><code><span class="o">...</span>
<span class="k">def</span> <span class="nf">display_game_elements</span><span class="p">(</span><span class="n">game</span><span class="p">):</span>
    <span class="n">game</span><span class="o">.</span><span class="n">screen</span><span class="o">.</span><span class="n">blit</span><span class="p">(</span><span class="n">game</span><span class="o">.</span><span class="n">background</span><span class="p">,</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
    <span class="n">game</span><span class="o">.</span><span class="n">player</span><span class="o">.</span><span class="n">display</span><span class="p">(</span><span class="n">game</span><span class="p">)</span>
    <span class="n">game</span><span class="o">.</span><span class="n">enemies</span><span class="o">.</span><span class="n">display</span><span class="p">(</span><span class="n">game</span><span class="p">)</span> <span class="c1"># this one</span>
    <span class="n">pygame</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>
<span class="o">...</span>
</code></pre></div>

<p>Une fois cela fait, il va falloir permettre aux ennemis de se déplacer en rejoutant la ligne suivante :</p>
<div class="codehilite"><pre><span></span><code><span class="k">def</span> <span class="nf">update_game_elements</span><span class="p">(</span><span class="n">game</span><span class="p">):</span>
    <span class="n">game</span><span class="o">.</span><span class="n">clock</span><span class="o">.</span><span class="n">tick</span><span class="p">(</span><span class="mi">60</span><span class="p">)</span>
    <span class="n">game</span><span class="o">.</span><span class="n">player</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>
    <span class="n">game</span><span class="o">.</span><span class="n">enemies</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">game</span><span class="p">)</span> <span class="c1"># this one</span>
</code></pre></div>

<p><pagebreak></pagebreak></p>
<p>Maintenant, il va falloir permettre aux ennemis d'attaquer. Pour cela on va créer une fonction dans le fichier « Astroders.py » :</p>
<div class="codehilite"><pre><span></span><code><span class="o">...</span>
<span class="k">def</span> <span class="nf">attack_on_tick</span><span class="p">(</span><span class="n">game</span><span class="p">):</span>
<span class="o">...</span>
</code></pre></div>

<p>Cette fonction devra :
- incrémenter la valeur de <em>game.frame</em> de 1
- ssi <em>game.frame</em> est strictement supérieur à 50, alors <em>game.frame</em> est remis à zéro et on appel <em>game.enemies.attack(game.screen)</em></p>
<p>Une fois cela fait, il ne faut pas oublier d'appeler cette nouvelle fonction dans la boucle du jeu :</p>
<div class="codehilite"><pre><span></span><code><span class="o">...</span>
<span class="k">while</span> <span class="n">game</span><span class="o">.</span><span class="n">running</span><span class="p">:</span>
    <span class="n">check_events</span><span class="p">(</span><span class="n">game</span><span class="p">)</span>
    <span class="n">attack_on_tick</span><span class="p">(</span><span class="n">game</span><span class="p">)</span> <span class="c1"># here</span>
    <span class="n">update_game_elements</span><span class="p">(</span><span class="n">game</span><span class="p">)</span>
    <span class="n">display_game_elements</span><span class="p">(</span><span class="n">game</span><span class="p">)</span>
<span class="o">...</span>
</code></pre></div>

<p><pagebreak></pagebreak></p>
<h2>III. Attention aux choques</h2>
<p>Mais vous arez remarqué que tes projectiles, comme ceux de tes ennemis n'atteignent leur cible. Pour qu'ils soient pris en compte, il va falloir créer une méthode <strong>check_attacks</strong> dans le fichier « Enemies.py »</p>
<div class="codehilite"><pre><span></span><code><span class="o">...</span>
<span class="k">def</span> <span class="nf">check_attacks</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">player</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">attack</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">attacks</span><span class="p">:</span>
        <span class="c1"># code here</span>
<span class="o">...</span>
</code></pre></div>

<p>Maintenant à vous de compléter la boucle pour qu'à chaque <em>attack</em>, ces conditions soient vérifiées :</p>
<ul>
<li>ssi la coordonnée y de l'<em>attack</em> est strictement supérieur à 850, alors on la supprime de la liste des attack (c'est-à-dire de <em>attacks</em>). Et on passe au tour de boucle suivant.</li>
<li>ssi la condition suivante est vrai, alors un supprime l'<em>attack</em> de la liste <em>attacks</em>. Et on passe au tour de boucle suivant.</li>
</ul>
<div class="codehilite"><pre><span></span><code><span class="k">if</span> <span class="n">attack</span><span class="o">.</span><span class="n">x</span> <span class="o">&lt;=</span> <span class="n">player</span><span class="o">.</span><span class="n">x</span> <span class="o">+</span> <span class="mi">100</span> <span class="ow">and</span> <span class="n">player</span><span class="o">.</span><span class="n">x</span> <span class="o">&lt;=</span> <span class="n">attack</span><span class="o">.</span><span class="n">x</span> <span class="o">+</span> <span class="mi">50</span>
<span class="ow">and</span> <span class="n">attack</span><span class="o">.</span><span class="n">y</span> <span class="o">+</span> <span class="mi">50</span> <span class="o">&gt;=</span> <span class="n">player</span><span class="o">.</span><span class="n">y</span> <span class="ow">and</span> <span class="n">player</span><span class="o">.</span><span class="n">y</span> <span class="o">+</span> <span class="mi">100</span> <span class="o">&gt;=</span> <span class="n">attack</span><span class="o">.</span><span class="n">y</span><span class="p">:</span>
</code></pre></div>

<p>Il vous suffit maintenant d'appeler la méthode que vous venez de créer dans le fichier « Astroders.py » :</p>
<div class="codehilite"><pre><span></span><code><span class="o">...</span>
<span class="k">def</span> <span class="nf">check_hit_boxes</span><span class="p">(</span><span class="n">game</span><span class="p">):</span>
    <span class="n">game</span><span class="o">.</span><span class="n">enemies</span><span class="o">.</span><span class="n">check_attacks</span><span class="p">(</span><span class="n">game</span><span class="o">.</span><span class="n">player</span><span class="p">)</span>
<span class="o">...</span>
<span class="k">while</span> <span class="n">game</span><span class="o">.</span><span class="n">running</span><span class="p">:</span>
    <span class="n">check_events</span><span class="p">(</span><span class="n">game</span><span class="p">)</span>
    <span class="n">attack_on_tick</span><span class="p">(</span><span class="n">game</span><span class="p">)</span>
    <span class="n">update_game_elements</span><span class="p">(</span><span class="n">game</span><span class="p">)</span>
    <span class="n">check_hit_boxes</span><span class="p">(</span><span class="n">game</span><span class="p">)</span>
<span class="o">...</span>
</code></pre></div>

<p><pagebreak></pagebreak></p>
<p>Vous pouvez maintenant démarrer à nouveau le programme, et le joueur devrait normalement perdre des points de vie lorsqu'une attaque l'atteint, mais ces attaques à lui n'ont toujours aucun effet !</p>
<p>En effet, nous ne vérifions pas que les projectiles du joueur atteignent leur cible. Pour cela on va compléter la boucle contenue dans la fonction <strong>check_bullets</strong> du fichier « Enemies.py »</p>
<div class="codehilite"><pre><span></span><code><span class="o">...</span>
 <span class="k">def</span> <span class="nf">check_bullets</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">width</span><span class="p">,</span> <span class="n">bullets</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">line_index</span><span class="p">,</span> <span class="n">line</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">enemies</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">enemie_index</span><span class="p">,</span> <span class="n">enemy</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">line</span><span class="p">):</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">enemy</span><span class="o">.</span><span class="n">alive</span><span class="p">:</span>
                <span class="k">continue</span>
            <span class="n">top</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">enemies_top</span> <span class="o">+</span> <span class="n">line_index</span> <span class="o">*</span> <span class="mi">80</span>
            <span class="n">left</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">lines_pos</span><span class="p">[</span><span class="n">line_index</span><span class="p">]</span> <span class="o">+</span> <span class="n">enemie_index</span> <span class="o">*</span> <span class="mi">80</span><span class="p">)</span> <span class="o">%</span> <span class="n">width</span>
            <span class="n">right</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">lines_pos</span><span class="p">[</span><span class="n">line_index</span><span class="p">]</span> <span class="o">+</span> <span class="n">enemie_index</span> <span class="o">*</span> <span class="mi">80</span> <span class="o">+</span> <span class="mi">50</span><span class="p">)</span> <span class="o">%</span> <span class="n">width</span>
            <span class="n">bottom</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">enemies_top</span> <span class="o">+</span> <span class="n">line_index</span> <span class="o">*</span> <span class="mi">80</span> <span class="o">+</span> <span class="mi">50</span>
            <span class="k">for</span> <span class="n">bullet</span> <span class="ow">in</span> <span class="n">bullets</span><span class="p">:</span>
                <span class="c1"># code here</span>
<span class="o">...</span>
</code></pre></div>

<p>Vous devrez ajouter les conditions suivantes :
- ssi la coordonnée y de <em>bullet</em> est strictement inférieure à la valeur de <em>top</em> <strong>OU</strong> si cette coordonnée est strictement supérieur à la valeur de <em>bottom</em>, alors passer au prochain tour de boucle.
- ssi la coordonnée x de <em>bullet</em> est supérieur ou égale à la valeur de <em>left</em> <strong>ET</strong> que qu'elle est aussi inférrieur ou égale à la valeur de <em>right</em>, alors on met l'attribue <em>alive</em> de l'<em>enemy</em> à False et on suprime cet élément du tableau des projectiles</p>
<p>Avant de relancer notre programme pour vérifier s'il fonctionne, n'oubliez pas d'appeler cette méthode dans le fichier « Astroders.py » :</p>
<div class="codehilite"><pre><span></span><code><span class="o">...</span>
<span class="k">def</span> <span class="nf">check_hit_boxes</span><span class="p">(</span><span class="n">game</span><span class="p">):</span>
    <span class="n">game</span><span class="o">.</span><span class="n">enemies</span><span class="o">.</span><span class="n">check_attacks</span><span class="p">(</span><span class="n">game</span><span class="o">.</span><span class="n">player</span><span class="p">)</span>
    <span class="n">game</span><span class="o">.</span><span class="n">enemies</span><span class="o">.</span><span class="n">check_bullets</span><span class="p">(</span><span class="n">game</span><span class="o">.</span><span class="n">window_width</span><span class="p">,</span> <span class="n">game</span><span class="o">.</span><span class="n">player</span><span class="o">.</span><span class="n">bullets</span><span class="p">)</span>
<span class="o">...</span>
</code></pre></div>

<h2>IV. Pour la victoire !</h2>
<p>Maintenant que le joueur peut perdre des points de vie et détruire ses ennemis, il faut mettre en place les conditions de victoire et de défaite. Pour ce faire nous allons de nouveau modifier le fichier « Astroders.py » pour y ajouter la fonction suivante :</p>
<div class="codehilite"><pre><span></span><code><span class="o">...</span>
<span class="k">def</span> <span class="nf">check_end_conditions</span><span class="p">(</span><span class="n">game</span><span class="p">):</span>
<span class="o">...</span>
</code></pre></div>

<p>À vous maintenant d'y implémenter les conditions suivantes :</p>
<ul>
<li>si le nombre de points de vie du joueur (<em>game.player.hp</em>) est inférieur ou  égale à 0 <strong>OU</strong> si la valeur de <em>game.enemies.enemies_top</em> est strictement supérieur à <em>game.window_height</em> - 150, alors on met la variable <em>game.running</em> à False.</li>
<li>si la valeur de <em>game.enemies.count_enemies()</em> est strictement égale à 0, alors met la variable <em>game.running</em> à False et la variable <em>game.win</em> à True.</li>
</ul>
<p>Bien évidemment, on n'oubliera pas d'appeler notre nouvelle fonction dans la boucle su jeu :</p>
<div class="codehilite"><pre><span></span><code><span class="k">while</span> <span class="n">game</span><span class="o">.</span><span class="n">running</span><span class="p">:</span>
    <span class="n">check_events</span><span class="p">(</span><span class="n">game</span><span class="p">)</span>
    <span class="n">attack_on_tick</span><span class="p">(</span><span class="n">game</span><span class="p">)</span>
    <span class="n">update_game_elements</span><span class="p">(</span><span class="n">game</span><span class="p">)</span>
    <span class="n">check_hit_boxes</span><span class="p">(</span><span class="n">game</span><span class="p">)</span>
    <span class="n">display_game_elements</span><span class="p">(</span><span class="n">game</span><span class="p">)</span>
    <span class="n">check_end_conditions</span><span class="p">(</span><span class="n">game</span><span class="p">)</span> <span class="c1"># don't forget me</span>
</code></pre></div>

<p><pagebreak></pagebreak></p>
<p>Maintenant que tu peux gagner ou perdre, à toi de mettre en place des messages de victoire ou de défaite :</p>
<div class="codehilite"><pre><span></span><code><span class="o">...</span>
<span class="k">while</span> <span class="n">game</span><span class="o">.</span><span class="n">running</span><span class="p">:</span>
    <span class="n">check_events</span><span class="p">(</span><span class="n">game</span><span class="p">)</span>
    <span class="n">attack_on_tick</span><span class="p">(</span><span class="n">game</span><span class="p">)</span>
    <span class="n">update_game_elements</span><span class="p">(</span><span class="n">game</span><span class="p">)</span>
    <span class="n">check_hit_boxes</span><span class="p">(</span><span class="n">game</span><span class="p">)</span>
    <span class="n">display_game_elements</span><span class="p">(</span><span class="n">game</span><span class="p">)</span>
    <span class="n">check_end_conditions</span><span class="p">(</span><span class="n">game</span><span class="p">)</span>
<span class="k">if</span> <span class="n">game</span><span class="o">.</span><span class="n">win</span><span class="p">:</span>
    <span class="c1"># add a line here</span>
<span class="k">else</span><span class="p">:</span>
    <span class="c1"># here too</span>
<span class="o">...</span>
</code></pre></div>

<p>Il vous suffit alors d'appeler la fonction <em>print()</em> qui permet d'afficher un message :</p>
<div class="codehilite"><pre><span></span><code><span class="nb">print</span><span class="p">(</span><span class="s2">"Hello you !"</span><span class="p">)</span>
</code></pre></div>

<p>Output :</p>
<div class="codehilite"><pre><span></span><code>Hello you !
</code></pre></div>

<p><pagebreak></pagebreak></p>
<h2>V. The end</h2>
<p>Tout d’abord : bravo !</p>
<p>Maintenant, libre à toi de modifier le jeu selon tes désirs ! Tu as normalement dû apprendre certaines choses, et tu peux modifier à ta guise des parties du programme ou ajouter de nouvelles choses facilement comme du texte, de nouveaux projectiles, etc… Voici quelques exemples d’ajouts sympathiques ! :</p>
<ul>
<li>Faire en sorte que chaque élément ajoute un bonus selon son type, comme plus de PV, augmentation de la vitesse de déplacement, augmentation de la vitesse de tir, et un bonus aléatoire entre ces  trois-là</li>
<li>De la musique et des sons.</li>
<li>Un score et un écran de Game Over.</li>
<li>Un menu</li>
<li>De nouveaux ennemis ou personnages jouables.</li>
</ul>
<p>N’hésite surtout pas à demander de l’aide à un Cobra qi tu as du mal à appliquer certaines de tes idées !</p>

    <script type="text/x-mathjax-config;executed=true">
        MathJax.Hub.Config({
      messageStyle: "none",
      extensions: ["tex2jax.js"],
      jax: ["input/TeX", "output/HTML-CSS"],
      tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"] ],
        displayMath: [ ['$$','$$'], ["\\[","\\]"] ],
        processEscapes: true
      },
      "HTML-CSS": {
        fonts: ["TeX"],
        scale: 85,
      }
    });
  </script>
    <script src="src/MathJax.js"></script>


</body></html>